
<!DOCTYPE html>
<html lang="en">
	<head>
		<title>School Formation - HOME</title>
		
		<link rel="stylesheet" 
			  type="text/css"
			  href="js/toast/jquery.toast.min.css" />
		
		<link rel="stylesheet" 
			  href="js/tablesorter/style.css">
		
		<link rel="stylesheet" 
			  href="dist/css/bootstrap.min.css">
		
		<link rel="stylesheet" 
			  href="datepicker/css/datepicker.css">
			  
		<script type="text/javascript"
				src="js/jquery/jquery-1.10.2.min.js">
		</script>
		<script type="text/javascript" 
				src="js/tablesorter/tsort.min.js">
		</script>
		<script type="text/javascript" 
				src="js/jsonTable.js">
		</script>
		<script type="text/javascript"
				src="js/jquery-ui/ui/jquery-ui.js">
		</script>
		<script type="text/javascript" 
				src="js/toast/jquery.toast.min.js">
		</script>
		
		
		
		<script type="text/javascript">
			
				/* creates and displays a toast message */
				function createToast(t){
					var options = {
						duration: 5000,
						sticky: false,
						type: t
					};
					
					$.toast('<h4>Success</h4> You are register to this session. ', options);
				}
				
				function populateLocationList(select, data) {
				    var items = [];
				    $.each(data, function (id, option) {
				        items.push('<li role="presentation"> <a role="menuitem" tabindex="-1" href="#">' + option.city + '</a></li>');
				    });  
				    select.html(items.join(''));
				}
				
				/* update table data from url */
				function getJsonUpdateTable()
				{
					 $("#dataTable").jsonTable({
						head : ['#','Operating System','Market Share', 'Subscribe'],
						json : ['id', 'name', 'share', 'Subscribe']
					});
					
					/*var options = {
					source : "data.json", // Can be a URL or a JSON object array
					rowClass : "rowClass", //(optional) Class to be applied
					callback : function() {
						// (optional) Do something when table is updated
						}
					}*/
					
					
					var obj = [
						{"id" : 1, "name" : "iOS", "share" : 57.56, "Subscribe" : "<button type=\"button\" class=\"btn btn-default btn-lg success\"><span class=\"glyphicon glyphicon-plus-sign\"></span> </button>"},
						{"id" : 2, "name" : "Android", "share" : 24.66, "Subscribe" : "<button type=\"button\" class=\"btn btn-default btn-lg success\"><span class=\"glyphicon glyphicon-plus-sign\"></span> </button>"},
						{"id" : 3, "name" : "Java ME", "share" : 10.72, "Subscribe" : "<button type=\"button\" class=\"btn btn-default btn-lg success\"><span class=\"glyphicon glyphicon-plus-sign\"></span> </button>"},
						{"id" : 4, "name" : "Symbian", "share" : 2.49, "Subscribe" : "<button type=\"button\" class=\"btn btn-default btn-lg success\"><span class=\"glyphicon glyphicon-plus-sign\"></span> </button>"},
						{"id" : 5, "name" : "Blackberry", "share" : 2.26, "Subscribe" : "<button type=\"button\" class=\"btn btn-default btn-lg success\"><span class=\"glyphicon glyphicon-plus-sign\"></span> </button>"},
						{"id" : 6, "name" : "Windows Phone", "share" : 1.33, "Subscribe" : "<button type=\"button\" class=\"btn btn-default btn-lg success\"><span class=\"glyphicon glyphicon-plus-sign\"></span> </button>"}
						]
					
					var options = {
						source : obj,
						rowClass : "rowClass",
					}
					
					$("#dataTable").jsonTableUpdate(options);
					
					/* initiate table with new columns get from JSON */
					$('table.tableSorter').tableSort();
					
					/*$.toast.config.align = 'right';
					$.toast.config.width = 400;*/
					
					/* 	register event to display toast on click on new 
						add button (got from JSON) */
					$('.success').click(function(){
						createToast($(this).attr('class'));
						return false;
					});
				}
			
				/* autoclose datepicker when date changed */
				$(function() {
					$('#datepicker').datepicker().on('changeDate', function (ev) {
						$(this).datepicker('hide');
						});
				});
				
				
			
				$(document).ready(function() {
					/* update table data */
					getJsonUpdateTable();
					
					/* initiate toasts parameters */
					$.toast.config.align = 'right';
					$.toast.config.width = 400;
					
					$.getJSON("http://localhost:8080/RED/service/byLocation", function(json) {
						populateLocationList($('ul'), json);
						$("#locationValues li a").click(function(){

							$("#locationSaver").val($(this).text());
							console.log('test');	
						 });
					});
					
					
					
					
				});
		</script>
		
		
		<script type="text/javascript" src="datepicker/js/bootstrap-datepicker.js"></script>

		<script type="text/javascript">
			
		</script>
		
	</head>
	
	<body>
	
		<div class="container" style="width:1000px">
	
			<br/>
			
			<div class="btn-group btn-group-justified">
			  	<a type="button" class="btn btn-default"><span class="glyphicon glyphicon-calendar">Date</span></a>
			  	<a type="button" class="btn btn-default"><span class="glyphicon glyphicon-pushpin">Location</span></a>
			  	<a type="button" class="btn btn-default"><span class="glyphicon glyphicon-text-height">itle</span></a>
			</div>
			<br/>
			<div class="row">
        		<div class="col-md-4">
        			Date
        		</div>
        		<div class="col-md-4">
					<div class="dropdown">
		  				<a id="dLabel" role="button" data-toggle="dropdown" data-target="#" href="/page.html">
		    				Locations <span class="caret"></span>
		  				</a>
		
		  			<ul id="locationValues" class="dropdown-menu" role="menu" aria-labelledby="dLabel">
		  			</ul>
					</div>	 
					<input type="text" id="locationSaver" class="form-control" placeholder="Location">
					    			
       			</div>
        		<div class="col-md-4" >
        			Keyword
        		</div>
      		</div>
			
			
			
			<br/><br/>
			
			<div class="row">
				<div class="col-xs-3" >
					<input type="text" id="datepicker" class="form-control" placeholder="Saisissez la date" data-date-format="dd-mm-yyyy"/>
				</div>
				<button type="button" class="btn btn-primary" id="launchScript" onclick="getJsonUpdateTable()">Update</button>
			</div>
				
			<br />
			
			<div class="panel panel-primary">
				<div class="panel-heading">Course Sessions</div>
 
				<table id="dataTable"
					class="table table-hover table-striped tableSorter">
					<thead>
					</thead>
					<tbody>
					</tbody>
				</table>
			</div>
		</div>
			
			<script src="dist/js/bootstrap.min.js"></script>
			
			<script type="text/javascript">$('.datepicker').datepicker({todayHighlight:"true"})</script>
			
			
			

			
	</body>
</html>
